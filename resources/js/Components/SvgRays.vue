<script setup>
import { onMounted } from "vue"

onMounted(() => {
    const paths = [...document.querySelectorAll('#rays path')].sort(() => Math.random() - 0.5)

    const greenPaths = Math.floor(paths.length * 0.45)
    const purplePaths = Math.floor(paths.length * 0.3)
    const yellowPaths = Math.floor(paths.length * 0.25)

    paths.forEach(path => {
        const randomDuration = Math.random() * 10 + 15
        path.style.setProperty('--animation-duration', `${randomDuration}s`)
    })

    paths.slice(0, greenPaths).forEach(path => path.setAttribute('stroke', '#298C65'))
    paths.slice(greenPaths, greenPaths + purplePaths).forEach(path => path.setAttribute('stroke', '#8E3BB4'))
    paths.slice(greenPaths + purplePaths, greenPaths + purplePaths + yellowPaths).forEach(path => path.setAttribute('stroke', '#F6C31B'))
})
</script>

<template>
    <div class="ray-container">
        <div class="ray-svg-container">
            <svg id="rays" width="345" height="900">
                <g>
                    <path d="M1 0V7M1 71V101M1 226V259M1 324V346M1 505V554M1 654V674M1 699V708M1 900V907M1 971V1001M1 1126V1159M1 1224V1246M1 1405V1454M1 1554V1574M1 1599V1608" />
                    <path d="M16 0V46M16 304V308M16 468V475M16 535V572M16 646V688M16 841V870M16 900V946M16 1204V1208M16 1368V1375M16 1435V1472M16 1546V1588M16 1741V1770" />
                    <path d="M31 0V42M31 80V112M31 182V194M31 218V268M31 456V469M31 587V637M31 757V799M31 900V942M31 980V1012M31 1082V1094M31 1118V1168M31 1356V1369M31 1487V1537M31 1657V1699" />
                    <path d="M286 0V42M286 80V112M286 182V194M286 218V268M286 456V469M286 587V637M286 757V799M286 900V942M286 980V1012M286 1082V1094M286 1118V1168M286 1356V1369M286 1487V1537M286 1657V1699" style="filter: blur(5px)" />
                    <path d="M46 0V10M46 222V253M46 362V389M46 632V684M46 900V910M46 1122V1153M46 1262V1289M46 1532V1584" />
                    <path d="M61 0V51M61 295V327M61 439V466M61 511V537M61 752V775M61 900V951M61 1195V1227M61 1339V1366M61 1411V1437M61 1652V1675" />
                    <path d="M76 0V43M76 244V291M76 369V393M76 652V656M76 873V894M76 900V943M76 1144V1191M76 1269V1293M76 1552V1556M76 1773V1794" />
                    <path d="M91 0V9M91 246V290M91 479V514M91 774V803M91 900V909M91 1146V1190M91 1379V1414M91 1674V1703" />
                    <path d="M106 0V32M106 94V143M106 353V358M106 385V395M106 422V468M106 740V778M106 900V932M106 994V1043M106 1253V1258M106 1285V1295M106 1322V1368M106 1640V1678" />
                    <path d="M271 0V32M271 94V143M271 353V358M271 385V395M271 422V468M271 740V778M271 900V932M271 994V1043M271 1253V1258M271 1285V1295M271 1322V1368M271 1640V1678" />
                    <path d="M121 0V15M121 82V131M121 342V358M121 511V562M121 751V756M121 900V915M121 982V1031M121 1242V1258M121 1411V1462M121 1651V1656" style="filter: blur(5px)" />
                    <path d="M331 0V15M331 82V131M331 342V358M331 511V562M331 751V756M331 900V915M331 982V1031M331 1242V1258M331 1411V1462M331 1651V1656" />
                    <path d="M136 0V32M136 303V338M136 558V598M136 750V776M136 900V932M136 1203V1238M136 1458V1498M136 1650V1676" />
                    <path d="M151 0V20M151 85V111M151 289V327M151 471V518M151 767V783M151 813V827M151 900V920M151 985V1011M151 1189V1227M151 1371V1418M151 1667V1683M151 1713V1727" />
                    <path d="M301 0V20M301 85V111M301 289V327M301 471V518M301 767V783M301 813V827M301 900V920M301 985V1011M301 1189V1227M301 1371V1418M301 1667V1683M301 1713V1727" />
                    <path d="M166 0V33M166 113V157M166 239V258M166 398V446M166 556V573M166 685V723M166 900V933M166 1013V1057M166 1139V1158M166 1298V1346M166 1456V1473M166 1585V1623" />
                    <path d="M181 0V48M181 247V291M181 511V559M181 831V847M181 883V892M181 900V948M181 1147V1191M181 1411V1459M181 1731V1747M181 1783V1792" />
                    <path d="M316 0V48M316 247V291M316 511V559M316 831V847M316 883V892M316 900V948M316 1147V1191M316 1411V1459M316 1731V1747M316 1783V1792" />
                    <path d="M196 0V24M196 249V262M196 354V360M196 387V395M196 417V442M196 538V543M196 800V832M196 895V900V924M196 1149V1162M196 1254V1260M196 1287V1295M196 1317V1342M196 1438V1443M196 1700V1732M196 1795V1800" style="filter: blur(5px)" />
                    <path d="M344 0V24M344 249V262M344 354V360M344 387V395M344 417V442M344 538V543M344 800V832M344 895V900V924M344 1149V1162M344 1254V1260M344 1287V1295M344 1317V1342M344 1438V1443M344 1700V1732M344 1795V1800" />
                    <path d="M211 0V22M211 234V253M211 423V436M211 546V552M211 651V701M211 886V900V922M211 1134V1153M211 1323V1336M211 1446V1452M211 1551V1601M211 1786V1800" />
                    <path d="M226 0V11M226 127V147M226 345V396M226 655V677M226 898V900V911M226 1027V1047M226 1245V1296M226 1555V1577M226 1798V1800" />
                    <path d="M241 0V50M241 261V285M241 433V479M241 527V531M241 795V837M241 900V950M241 1161V1185M241 1333V1379M241 1427V1431M241 1695V1737" />
                    <path d="M256 0V13M256 276V296M256 349V356M256 583V601M256 769V804M256 826V844M256 900V913M256 1176V1196M256 1249V1256M256 1483V1501M256 1669V1704M256 1726V1744" />
                </g>
            </svg>
        </div>
    </div>
</template>

<style scoped>
.ray-container {
    position: absolute;
    top: 0;
    left: 38%;
    height: 100%;
    transform: translate3d(-50%, 0, 0);
}

.ray-svg-container {
    position: absolute;
    display: block;
    width: 100%;
    height: 100%;
    pointer-events: none;
    user-select: none;
    transform: skew(34deg);
}

svg {
    /*position: absolute;
    top: 0;
    left: 50%;
    z-index: 1;
    overflow: hidden;
    pointer-events: none; */
    transform: translate3d(-50%, 0, 0);
}

svg path {
    stroke-linecap: round;
    stroke-width: 1.2px;
    animation: rays var(--animation-duration) linear infinite;
    will-change: transform;
}

@keyframes rays {
    0% {
        transform: translateZ(0);
    }
    100% {
        transform: translate3d(0, -100%, 0);
    }
}
</style>
